<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Systems</title>
<style>
  body { font-family: sans-serif; margin: 20px; }
  input { padding: 12px; width: 70%; font-size: 16px; }
  button { padding: 12px; font-size: 16px; margin-left: 5px; cursor: pointer; }
  #addBtn { background-color: #4CAF50; color: white; border: none; border-radius: 5px; }
  ul { list-style: none; padding: 0; }
  li { margin: 15px 0; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
  li ul { margin-top: 5px; }
  li button { background-color: #f44336; color: white; border: none; border-radius: 5px; padding: 5px 10px; cursor: pointer; margin-top: 5px; }
</style>
</head>
<body>

<h1>Systems</h1>

<input id="systemInput" placeholder="Add a new system" />
<button id="addBtn">+ Add System</button>

<ul id="systemsList"></ul>

<script>
const systemInput = document.getElementById('systemInput');
const addBtn = document.getElementById('addBtn');
const systemsList = document.getElementById('systemsList');

let systems = JSON.parse(localStorage.getItem('systems')) || [];

// Render all systems
function renderSystems() {
  systemsList.innerHTML = '';
  systems.forEach((sys, index) => {
    const li = document.createElement('li');
    li.innerHTML = `
      <strong>${sys.name}</strong>
      <ul>
        ${['Prep','Focus','Review'].map((task, i) => `
          <li>
            <input type="checkbox" id="sys${index}-task${i}" ${sys.tasks[i] ? 'checked' : ''}>
            <label for="sys${index}-task${i}">${task}</label>
          </li>`).join('')}
      </ul>
      <button onclick="removeSystem(${index})">âœ• Remove</button>
    `;
    systemsList.appendChild(li);

    // Add checkbox listeners
    sys.tasks.forEach((t, i) => {
      const cb = document.getElementById(`sys${index}-task${i}`);
      cb.addEventListener('change', () => {
        systems[index].tasks[i] = cb.checked;
        localStorage.setItem('systems', JSON.stringify(systems));
      });
    });
  });
}

// Add a new system
function addSystem() {
  const name = systemInput.value.trim();
  if (!name) return;
  systems.push({ name, tasks: [false, false, false] });
  systemInput.value = '';
  localStorage.setItem('systems', JSON.stringify(systems));
  renderSystems();
}

// Remove system
function removeSystem(index) {
  systems.splice(index, 1);
  localStorage.setItem('systems', JSON.stringify(systems));
  renderSystems();
}

// Event listeners
addBtn.addEventListener('click', addSystem);
systemInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') addSystem();
});

// Initial render
renderSystems();
</script>

</body>
</html>